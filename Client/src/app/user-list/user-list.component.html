<div class="container-fluid bg-white rounded shadow" style="margin-top: 1%; padding-bottom: 2%;">
  <h1 style="font-weight: bold; text-align: center; padding-top: 2%;">Employees Details</h1>
  <hr>
  <div *ngIf="showFormBoolean == true">
    <div class="container py-7 bg-white rounded-lg shadow" style="margin-top: 1%; padding: 3%;">
      <h2> Add Employee</h2>
      <div class="text-right" style="margin-top: -6%;">
        <button class="btn btn-secondary" (click)="goBack()" title="Back">
          <i class="fas fa-arrow-left"></i>
        </button>
      </div>
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="needs-validation" novalidate style="margin-top: 5%;">
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="validationCustom01">User Name</label>
            <input type="text" class="form-control" id="validationCustom01" placeholder="User name"
              formControlName="userName">
            <div *ngIf="form.get('userName')?.invalid && (form.get('userName')?.dirty || form.get('userName')?.touched)"
              class="invalid-feedback">
              <div *ngIf="form.get('userName')?.hasError('required')">User Name is required.</div>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="validationCustomUsername">Email</label>
            <div class="input-group">
              <input type="email" class="form-control" id="validationCustomUsername" placeholder="Email"
                formControlName="email">
              <div *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched)"
                class="invalid-feedback">
                <div *ngIf="form.get('email')?.hasError('required')">Email is required.</div>
                <div *ngIf="form.get('email')?.hasError('email')">Invalid email format.</div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label class="mr-sm-2" for="inlineFormCustomSelect">Position</label>
            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="position">
              <option selected>-Select-</option>
              <option *ngFor="let position of positionList" [value]="position.id">{{ position.departmentName }}</option>
            </select>
            <div *ngIf="form.get('position')?.invalid && (form.get('position')?.dirty || form.get('position')?.touched)"
              class="invalid-feedback">Position is required.</div>
          </div>
          <div class="col-md-6 mb-3">
            <label class="mr-sm-2" for="inlineFormCustomSelect">Schedule</label>
            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="schedule">
              <option selected>-Select-</option>
              <option *ngFor="let shift of shiftList" [value]="shift.id">{{ shift.shift }}</option>
            </select>
            <div *ngIf="form.get('schedule')?.invalid && (form.get('schedule')?.dirty || form.get('schedule')?.touched)"
              class="invalid-feedback">Schedule is required.</div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="validationPassword">Password</label>
            <div class="input-group">
              <input [type]="showPassword ? 'text' : 'password'" class="form-control" id="validationPassword"
                placeholder="Password" formControlName="password">
              <div class="input-group-append">
                <span class="input-group-text" (click)="togglePasswordVisibility()">
                  <fa-icon [icon]="showPassword ? faEye : faEyeSlash"></fa-icon>
                </span>
              </div>
            </div>
            <div *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)"
              class="invalid-feedback">Password is required.</div>
          </div>
        </div>
        <button class="btn btn-primary" type="submit" title="Add User">Submit</button>
        <div *ngIf="showAlertMessage" class="alert alert-danger" style="margin-top: 1%;">
          {{ message }}
        </div>
      </form>
    </div>
  </div>
  <div *ngIf="showUpdateFormBoolean == true">
    <div class="container py-7 bg-white rounded-lg shadow" style="margin-top: 1%; padding: 3%;">
      <h2> Update Employee</h2>
      <div class="text-right" style="margin-top: -6%;">
        <button class="btn btn-secondary" (click)="goBackUpdate()" title="Back">
          <i class="fas fa-arrow-left"></i>
        </button>
      </div>
      <form [formGroup]="form" (ngSubmit)="onSubmitUpdate()" class="needs-validation" novalidate
        style="margin-top: 5%;">
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="validationCustom01">User Name</label>
            <input type="text" class="form-control" id="validationCustom01" placeholder="User name"
              formControlName="userName">
            <div *ngIf="form.get('userName')?.invalid && (form.get('userName')?.dirty || form.get('userName')?.touched)"
              class="invalid-feedback">
              <div *ngIf="form.get('userName')?.hasError('required')">User Name is required.</div>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="validationCustomUsername">Email</label>
            <div class="input-group">
              <input type="email" class="form-control" id="validationCustomUsername" placeholder="Email"
                formControlName="email">
              <div *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched)"
                class="invalid-feedback">
                <div *ngIf="form.get('email')?.hasError('required')">Email is required.</div>
                <div *ngIf="form.get('email')?.hasError('email')">Invalid email format.</div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label class="mr-sm-2" for="inlineFormCustomSelect">Position</label>
            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="position">
              <option selected>-Select-</option>
              <option *ngFor="let position of positionList" [value]="position.id">{{ position.departmentName }}</option>
            </select>
            <div *ngIf="form.get('position')?.invalid && (form.get('position')?.dirty || form.get('position')?.touched)"
              class="invalid-feedback">Position is required.</div>
          </div>
          <div class="col-md-6 mb-3">
            <label class="mr-sm-2" for="inlineFormCustomSelect">Schedule</label>
            <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" formControlName="schedule">
              <option selected>-Select-</option>
              <option *ngFor="let shift of shiftList" [value]="shift.id">{{ shift.shift }}</option>
            </select>
            <div *ngIf="form.get('schedule')?.invalid && (form.get('schedule')?.dirty || form.get('schedule')?.touched)"
              class="invalid-feedback">Schedule is required.</div>
          </div>
        </div>
        <div class="form-row">
          <div class="col-md-6 mb-3">
            <label for="validationPassword">Password</label>
            <div class="input-group">
              <input [type]="showPassword ? 'text' : 'password'" class="form-control" id="validationPassword"
                placeholder="Password" formControlName="password">
              <div class="input-group-append">
                <span class="input-group-text" (click)="togglePasswordVisibility()">
                  <fa-icon [icon]="showPassword ? faEye : faEyeSlash"></fa-icon>
                </span>
              </div>
            </div>
            <div *ngIf="form.get('password')?.invalid && (form.get('password')?.dirty || form.get('password')?.touched)"
              class="invalid-feedback">Password is required.</div>
          </div>
        </div>
        <button class="btn btn-primary" type="submit" title="Update User">Update</button>
        <div *ngIf="showAlertMessage" class="alert alert-danger" style="margin-top: 1%;">
          {{ message }}
        </div>
      </form>
    </div>
  </div>
  <div *ngIf="isUserList == true">
    <div *ngIf="showAlertMessage" class="alert alert-success" style="margin-top: 1%;">
      {{ message }}
    </div>
    <div class="row">
      <div class="col-md-2 mb-3">
        <label class="mr-sm-2" for="inlineFormCustomSelect" style="font-weight: bold;">Select Schedule</label>
        <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" [(ngModel)]="selectedShift"
          (ngModelChange)="selectedShiftData($event)">
          <option selected disabled>-Select-</option>
          <option *ngFor="let shift of shiftList" [value]="shift.id">{{ shift.shift }}</option>
        </select>
      </div>
      <div class="col-md-2 mb-3">
        <label class="mr-sm-2" for="inlineFormCustomSelect" style="font-weight: bold;">Select Department</label>
        <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" [(ngModel)]="selectedDepartment"
          (ngModelChange)="selectedDepartmentData($event)">
          <option selected disabled>-Select-</option>
          <option *ngFor="let position of positionList" [value]="position.id">{{ position.departmentName }}</option>
        </select>
      </div>
      <div class="col-md-2 mb-3" style="margin-top: 2%;">
        <i class="fas fa-sync fa-2x" (click)="refreshUser()"></i>
      </div>
      <div class="col-md-4 mb-3">
      </div>
      <div class="col-md-2 mb-3" style="text-align: right; margin-top: 2%;">
        <button type="button" class="btn btn-success" (click)="addForm()" title="Add User">+ Add New</button>
      </div>
    </div>
    <div *ngIf="userList.length > 0">
      <table class="table table-hover table-bordered" *ngIf="userList">
        <thead>
          <tr>
            <th scope="col">Sl.no</th>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Position</th>
            <th scope="col">Email</th>
            <th scope="col">Schedule</th>
            <th scope="col">Member Since</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of userList | paginate: { itemsPerPage: itemsPerPage, currentPage: page }; let i=index">
            <th scope="row">{{ i+1 }}</th>
            <td>{{ user.id }}</td>
            <td>{{ user.username}}</td>
            <td>{{ user.departmentName}}</td>
            <td>{{ user.email}}</td>
            <td>{{ user.shiftName}}</td>
            <td>{{ user.memberSince | date:'yyyy-MM-dd' }}</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-success mr-2" (click)="editUser(user)" title="Edit User">
                  <i class="fas fa-user-pen"></i>
                </button>
                <button class="btn btn-danger" (click)="deleteUser(user.id)" title="Delete User">
                  <i class="fas fa-trash-can"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="text-right" style="margin-top: 2%;">
        <pagination-controls (pageChange)="page = $event"></pagination-controls>
      </div>
    </div>
    <div class="container bg-white rounded shadow" *ngIf="userList.length == 0">
      <h1 style="font-weight: bold; text-align: center; padding: 5%;">NO USER DATA FOUND</h1>
    </div>
  </div>
</div>